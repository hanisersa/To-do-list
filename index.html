<!DOCTYPE html>
<html lang="en">
 <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="styletodolist.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <title>TO DO LIST</title>
 </head>

 <body>
  <div class="main-content">
    <button id="theme-toggle" aria-label="Toggle dark mode">üåô</button>
    <h1 class="main-title"> To Do List </h1>
    <div class="header">
    <h1 class="title">JUST DO IT .</h1>
    <div class="container">
    <input type="text" id="taskinput" placeholder="add your task here" aria-label="Task input">
    <button onclick="addtask()" class="taskbutton" id="addtaskbutton">Add Task</button>
    <button onclick="cleartask()" class="taskbutton" id="cleartasksbutton">Clear Tasks</button>
    </div>
    <div id="progress" style="margin-top:10px;"></div>
    </div>
    <ul id="taskList"></ul>
    </div>
    <div class="footer">&copy; 2025 . TO DO LIST. All rights reserved.</div>
  </body>
</html>
<script>
let tasks = JSON.parse(localStorage.getItem('tasks') || '[]');

function addtask() {
    let taskinput = document.getElementById("taskinput").value.trim();
    if (taskinput === "") return;
    tasks.push({text: taskinput, completed: false, important: false});
    document.getElementById("taskinput").value = "";
    saveTasks();
    showtasks();
}

function cleartask() {
    if (!confirm("Are you sure you want to clear all tasks?")) return;
    tasks = [];
    saveTasks();
    showtasks();
}

function saveTasks() {
    localStorage.setItem('tasks', JSON.stringify(tasks));
}

// ...existing code...
function showtasks() {
    let taskList = document.getElementById("taskList");
    taskList.innerHTML = "";
    let completedCount = 0;
    tasks.forEach((task, i) => {
        let li = document.createElement("li");
        li.setAttribute('tabindex', '0');
        li.style.transition = "all 0.3s";
        // Checkbox
        let checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.checked = !!task.completed;
        checkbox.setAttribute('aria-label', 'Mark task completed');
        checkbox.onchange = function () {
            task.completed = checkbox.checked;
            saveTasks();
            showtasks();
        };
        // Star (important) button
        let starBtn = document.createElement("span");
        starBtn.textContent = task.important ? "‚≠ê" : "‚òÜ";
        starBtn.style.cursor = "pointer";
        starBtn.className= "star-btn";
        starBtn.onclick = function () {
            task.important = !task.important;
            saveTasks();
            showtasks();
        };
        // Task text (editable)
        let taskText = document.createElement("span");
        taskText.textContent = `${i + 1}. ${task.text}`;
        taskText.style.marginRight = "10px";
        taskText.style.cursor = "pointer";
        taskText.ondblclick = function () {
            let input = document.createElement('input');
            input.type = 'text';
            input.value = task.text;
            input.onblur = function () {
                task.text = input.value;
                saveTasks();
                showtasks();
            };
            taskText.replaceWith(input);
            input.focus();
        };
        // Remove button
        let removeBtn = document.createElement("button");
        removeBtn.textContent = "Remove";
        removeBtn.className = "remove-btn";
        removeBtn.onclick = function () {
            li.style.opacity = '0';
            setTimeout(() => {
              tasks.splice(i, 1);
              saveTasks();
              showtasks();
            }, 300);
        };
        // Completed style
        if (task.completed) {
            li.classList.add('completed');
            completedCount++;
        }
        // Important style
        if (task.important) {
            li.style.background = "#fffbe6"; // light yellow for important
        }
        let actionDiv = document.createElement("div");
        actionDiv.style.display = "flex";
        actionDiv.style.alignItems = "center";
        actionDiv.appendChild(starBtn);
        actionDiv.appendChild(removeBtn);

        li.appendChild(checkbox);
        li.appendChild(taskText);
        li.appendChild(actionDiv);
         taskList.appendChild(li);
    });
    let progress = document.getElementById('progress');
    progress.textContent = `done ${completedCount}/${tasks.length}`;
}
showtasks();

document.getElementById("taskinput").addEventListener("keydown", function(e) {
  if (e.key === "Enter") {
    addtask();
  }
});
</script>
<script>
  const toggleBtn = document.getElementById('theme-toggle');

  toggleBtn.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';

  toggleBtn.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');

    if (document.body.classList.contains('dark-mode')) {
      toggleBtn.textContent = '‚òÄÔ∏è'; 
    } else {
      toggleBtn.textContent = 'üåô'; 
    }
  });
</script>